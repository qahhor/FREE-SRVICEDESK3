spring:
  application:
    name: channel-service

  datasource:
    url: jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:servicedesk}
    username: ${DB_USERNAME:servicedesk}
    password: ${DB_PASSWORD:servicedesk}
    driver-class-name: org.postgresql.Driver

  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: false

  flyway:
    enabled: true
    baseline-on-migrate: true
    locations: classpath:db/migration

  rabbitmq:
    host: ${RABBITMQ_HOST:localhost}
    port: ${RABBITMQ_PORT:5672}
    username: ${RABBITMQ_USERNAME:guest}
    password: ${RABBITMQ_PASSWORD:guest}

server:
  port: ${SERVER_PORT:8081}

# Email Channel Configuration
channel:
  email:
    enabled: ${EMAIL_ENABLED:true}
    smtp:
      host: ${SMTP_HOST:smtp.gmail.com}
      port: ${SMTP_PORT:587}
      username: ${SMTP_USERNAME:}
      password: ${SMTP_PASSWORD:}
      auth: true
      starttls-enable: true
      from-address: ${SMTP_FROM_ADDRESS:support@servicedesk.io}
      from-name: ${SMTP_FROM_NAME:Service Desk Support}
    imap:
      host: ${IMAP_HOST:imap.gmail.com}
      port: ${IMAP_PORT:993}
      username: ${IMAP_USERNAME:}
      password: ${IMAP_PASSWORD:}
      folder: ${IMAP_FOLDER:INBOX}
      ssl: true
      poll-interval-seconds: ${IMAP_POLL_INTERVAL:60}
      max-messages-per-poll: ${IMAP_MAX_MESSAGES:10}
      mark-as-read: true
      delete-after-processing: false
    processing:
      auto-create-ticket: true
      default-project-key: DESK
      default-priority: MEDIUM
      max-subject-length: 200
      max-body-length: 10000
      extract-attachments: true

  telegram:
    enabled: ${TELEGRAM_ENABLED:false}
    bot-token: ${TELEGRAM_BOT_TOKEN:}
    bot-username: ${TELEGRAM_BOT_USERNAME:}
    webhook-url: ${TELEGRAM_WEBHOOK_URL:}
    default-project-key: ${TELEGRAM_DEFAULT_PROJECT_KEY:DESK}
    max-message-length: ${TELEGRAM_MAX_MESSAGE_LENGTH:4096}
    welcome-message: ${TELEGRAM_WELCOME_MESSAGE:Welcome to Service Desk! How can we help you today?}
    help-message: |
      Available commands:
      /start - Start conversation
      /help - Show this help message
      /new - Create a new ticket
      /status <ticket_number> - Check ticket status
      /my_tickets - List your tickets
      /cancel - Cancel current operation

logging:
  level:
    root: INFO
    io.greenwhite.servicedesk: DEBUG
